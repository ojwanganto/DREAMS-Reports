<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.3.1.final using JasperReports Library version 6.3.1  -->
<!-- 2016-12-01T14:46:44 -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="RPT202b - When Last Tested for HIV by Age at Enrollment (Bar)" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="bb2640fb-ac31-44e1-8350-59c0e029b533">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="DREAMS"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="477"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="523"/>
	<template><![CDATA["uc-jasper-reports/styles/UC_Styles.jrtx"]]></template>
	<queryString language="SQL">
		<![CDATA[SELECT number_tested, When_tested_last_HIV, age_group, total, ROUND(((number_tested/total)*100), 0) as percentage FROM ( SELECT (SELECT SUM(number_tested) number_tested FROM (SELECT count(id) AS number_tested, IFNULL(When_tested_last_HIV, 'Missing') AS When_tested_last_HIV, age_group
FROM stag_client_hiv_testing
GROUP BY age_group
ORDER BY age_group) A WHERE A.age_group = B.age_group) AS total, B.number_tested, B.When_tested_last_HIV, B.age_group FROM
(SELECT count(id) AS number_tested, IFNULL(When_tested_last_HIV, 'Missing') AS When_tested_last_HIV, age_group
FROM stag_client_hiv_testing
GROUP BY When_tested_last_HIV, age_group
ORDER BY age_group) B) C]]>
	</queryString>
	<field name="number_tested" class="java.lang.Long"/>
	<field name="When_tested_last_HIV" class="java.lang.String"/>
	<field name="age_group" class="java.lang.String"/>
	<field name="total" class="java.math.BigDecimal"/>
	<field name="percentage" class="java.math.BigDecimal"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="253" splitType="Stretch">
			<stackedBarChart>
				<chart isShowLegend="true" evaluationTime="Report" theme="default">
					<reportElement style="UC Chart" x="0" y="0" width="560" height="220" uuid="5e79a526-2cf7-41a4-8622-38164386e284">
						<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
						<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
					</reportElement>
					<chartTitle>
						<titleExpression><![CDATA["When Last Tested for HIV by Age at Enrollment"]]></titleExpression>
					</chartTitle>
					<chartSubtitle/>
					<chartLegend position="Bottom"/>
				</chart>
				<categoryDataset>
					<categorySeries>
						<seriesExpression><![CDATA[$F{When_tested_last_HIV}]]></seriesExpression>
						<categoryExpression><![CDATA[$F{age_group}]]></categoryExpression>
						<valueExpression><![CDATA[$F{percentage}]]></valueExpression>
					</categorySeries>
				</categoryDataset>
				<barPlot>
					<plot orientation="Horizontal">
						<seriesColor seriesOrder="0" color="#455C73"/>
						<seriesColor seriesOrder="1" color="#9B59B6"/>
						<seriesColor seriesOrder="2" color="#BDC3C7"/>
						<seriesColor seriesOrder="3" color="#26B99A"/>
						<seriesColor seriesOrder="4" color="#3498DB"/>
					</plot>
					<itemLabel/>
					<categoryAxisFormat>
						<axisFormat labelColor="#000000" tickLabelColor="#000000" axisLineColor="#000000"/>
					</categoryAxisFormat>
					<valueAxisLabelExpression><![CDATA["Percentage"]]></valueAxisLabelExpression>
					<valueAxisFormat>
						<axisFormat labelColor="#000000" tickLabelColor="#000000" axisLineColor="#000000"/>
					</valueAxisFormat>
					<rangeAxisMaxValueExpression><![CDATA[100]]></rangeAxisMaxValueExpression>
				</barPlot>
			</stackedBarChart>
		</band>
	</pageHeader>
</jasperReport>
